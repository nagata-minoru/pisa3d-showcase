(function(){"use strict";var e={108:function(e,t,o){var r=o(9242),n=o(3396);const a={id:"app"};function i(e,t,o,r,i,c){const s=(0,n.up)("PisaTowerComponent");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(s)])}const c=e=>((0,n.dD)("data-v-48f389a0"),e=e(),(0,n.Cn)(),e),s={ref:"rendererDom",style:{width:"100vw",height:"100vh"}},l={class:"toolbar"},d={class:"form-check form-switch"},u=c((()=>(0,n._)("label",{class:"form-check-label",for:"wireframeSwitch"},"ワイヤフレーム表示",-1))),h={class:"form-check form-switch"},w=c((()=>(0,n._)("label",{class:"form-check-label",for:"cameraHelperSwitch"},"CameraHelper 表示",-1))),b={class:"form-check form-switch"},f=c((()=>(0,n._)("label",{class:"form-check-label",for:"rotateXSwitch"},"X軸で回転",-1))),m={class:"form-check form-switch"},p=c((()=>(0,n._)("label",{class:"form-check-label",for:"rotateYSwitch"},"Y軸で回転",-1))),v={class:"form-check form-switch"},g=c((()=>(0,n._)("label",{class:"form-check-label",for:"rotateZSwitch"},"Z軸で回転",-1))),_={class:"form-check"};function y(e,t,o,a,i,c){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",s,null,512),(0,n._)("div",l,[(0,n._)("div",d,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",id:"wireframeSwitch","onUpdate:modelValue":t[0]||(t[0]=e=>a.isWireframe=e),onChange:t[1]||(t[1]=(...e)=>a.updateWireframeVisibility&&a.updateWireframeVisibility(...e))},null,544),[[r.e8,a.isWireframe]]),u]),(0,n._)("div",h,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",id:"cameraHelperSwitch","onUpdate:modelValue":t[2]||(t[2]=e=>a.showCameraHelper=e),onChange:t[3]||(t[3]=(...e)=>a.updateCameraHelperVisibility&&a.updateCameraHelperVisibility(...e))},null,544),[[r.e8,a.showCameraHelper]]),w]),(0,n._)("div",b,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",id:"rotateXSwitch","onUpdate:modelValue":t[4]||(t[4]=e=>a.rotateX=e)},null,512),[[r.e8,a.rotateX]]),f]),(0,n._)("div",m,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",id:"rotateYSwitch","onUpdate:modelValue":t[5]||(t[5]=e=>a.rotateY=e)},null,512),[[r.e8,a.rotateY]]),p]),(0,n._)("div",v,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",id:"rotateZSwitch","onUpdate:modelValue":t[6]||(t[6]=e=>a.rotateZ=e)},null,512),[[r.e8,a.rotateZ]]),g]),(0,n._)("div",_,[(0,n._)("button",{onClick:t[7]||(t[7]=(...e)=>a.resetRotation&&a.resetRotation(...e)),class:"btn btn-primary"},"ローテーションリセット")])])])}var k=o(7327),x=o(4870),S=o(1114),C=o(4543),H=o(9469),O=o(8635);class j extends S.ZAu{constructor(){super(),(0,k.Z)(this,"_aabb",void 0),(0,k.Z)(this,"obb",void 0),this._aabb=null,this.obb=new O.T}get aabb(){if(!this._aabb)throw"ExtendedGroup.aabb: _aabb is invalid";return this._aabb}add(...e){super.add(...e);const t=new S.ZzF;t.setFromObject(this);const o=new S.Pa4,r=new S.Pa4;t.getSize(o),t.getCenter(r);const n=new S.DvJ(o.x,o.y,o.z),a=new S.xoR({color:"green",wireframe:!0});return this._aabb=new S.Kj0(n,a),this._aabb.position.copy(r),super.add(this._aabb),this._aabb.geometry.computeBoundingBox(),this.obb.fromBox3(this._aabb.geometry.boundingBox),this}getOBB(){if(!this._aabb)throw"ExtendedGroup.getOBB: _aabb is invalid";return this.obb.clone().applyMatrix4(this._aabb.matrixWorld)}}var B={name:"PisaTowerComponent",setup(){const e=(0,x.iH)(null),t=(0,x.iH)(!0),o=(0,x.iH)(!1),r=(0,x.iH)(!1),a=(0,x.iH)(!1),i=(0,x.iH)(!1);let c,s,l,d,u,h=null;const w=()=>{const e=new S.Ox3(16777215,1);return e.position.set(20,20,20),e.castShadow=!0,e.shadow.mapSize.width=4096,e.shadow.mapSize.height=4096,e.shadow.camera.left=-15,e.shadow.camera.right=15,e.shadow.camera.top=15,e.shadow.camera.bottom=-15,e.shadow.camera.far=100,e},b=()=>(l=new S.cPb(75,window.innerWidth/window.innerHeight,.1,1e3),l.position.set(15,15,-15),l),f=()=>{const t=new S.CP7;return t.setSize(window.innerWidth,window.innerHeight),e.value.appendChild(t.domElement),t.shadowMap.enabled=!0,t.setClearColor("lightsteelblue"),t},m=()=>{const e=new S.Kj0(new S._12(40,40),new S.YBo({color:"tan",side:S.ehD}));return e.position.y=-.1,e.rotateX(Math.PI/2),e.receiveShadow=!0,e},p=()=>{const e=new S.xsS;return e.add(new S.Mig(16777215,.3)),e.add(new S.VLJ(50,20)),e.add(m()),e},v=(e,t,o)=>{const r=new S.xo$(.15,32,32),n=new S.xoR({color:"blue"}),a=new S.Kj0(r,n);return a.position.set(e,t,o),a},g=()=>new Promise(((e,t)=>{const o=new H.E;o.load("target.glb",(t=>{t.scene.traverse((e=>{if(e instanceof S.Kj0){e.castShadow=!0,e.receiveShadow=!0;const t=new S.TOt(e.geometry),o=new S.ejS(t,new S.nls({color:"mediumseagreen"}));e.add(o)}}));const o=new j;o.add(t.scene),o.aabb.castShadow=!0,o.aabb.receiveShadow=!0,e(o)}),void 0,(e=>{console.error("An error occurred while loading the GLB model:",e),t(e)}))})),_=()=>{c=requestAnimationFrame(_),h&&(r.value&&h.rotateX(.005),a.value&&h.rotateY(.005),i.value&&h.rotateZ(.005));const e=h?.getOBB();s.children.forEach((t=>{t instanceof S.Kj0&&t.geometry instanceof S.xo$&&t.material.color.set(e.containsPoint(t.position)?"red":"blue")})),d.render(s,l)};window.onresize=()=>{l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),d.setSize(window.innerWidth,window.innerHeight)},(0,n.bv)((async()=>{l=b(),d=f(),s=p();const e=w();s.add(e),u=new S.Rki(e.shadow.camera),s.add(u),u.visible=o.value;const t=10;try{h=await g(),s.add(h)}catch(n){console.error("An error occurred while loading the GLB model:",n)}const r=1.2;for(let o=0;o<10;o++)for(let e=0;e<10;e++)for(let n=0;n<10;n++)s.add(v(o*r-5,e*r-5+t/2,n*r-5));new C.z(l,d.domElement),_()})),(0,n.Jd)((()=>{cancelAnimationFrame(c)}));const y=()=>{if(!h)throw"updateWireframeVisibility: invalid glbModel";h.aabb.material.wireframe=t.value},k=()=>u.visible=o.value,O=()=>h.rotation.set(0,0,0);return{rendererDom:e,isWireframe:t,updateWireframeVisibility:y,showCameraHelper:o,updateCameraHelperVisibility:k,rotateX:r,rotateY:a,rotateZ:i,resetRotation:O}}},P=o(89);const V=(0,P.Z)(B,[["render",y],["__scopeId","data-v-48f389a0"]]);var W=V,Z={name:"App",components:{PisaTowerComponent:W}};const z=(0,P.Z)(Z,[["render",i]]);var X=z;(0,r.ri)(X).mount("#app")}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,r,n,a){if(!r){var i=1/0;for(d=0;d<e.length;d++){r=e[d][0],n=e[d][1],a=e[d][2];for(var c=!0,s=0;s<r.length;s++)(!1&a||i>=a)&&Object.keys(o.O).every((function(e){return o.O[e](r[s])}))?r.splice(s--,1):(c=!1,a<i&&(i=a));if(c){e.splice(d--,1);var l=n();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,n,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,a,i=r[0],c=r[1],s=r[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(n in c)o.o(c,n)&&(o.m[n]=c[n]);if(s)var d=s(o)}for(t&&t(r);l<i.length;l++)a=i[l],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},r=self["webpackChunkcube_toggler_3d"]=self["webpackChunkcube_toggler_3d"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[998],(function(){return o(108)}));r=o.O(r)})();
//# sourceMappingURL=app.09ea3fde.js.map